# Shell学习笔记

Linux Shell 学习笔记

Shell是一种应用程序，提供了一个界面，用户通过这个界面，访问操作系统内核服务。

### Shell变量

#### 定义变量

> 如：var1=“123456”
>
> 变量名和等号之间不能有空格
>
> 变量名中不能有空格，可以使用下划线
>
> 不能使用标点符号
>
> 不能使用bash里的关键字
>
> 只能使用因为字母，数字下划线，首个字符不能是数字

#### 使用变量

> 使用一个定义过的变量，在变量前加美元符号。
>
> 如：$var1
>
> 变量外面的花括号是可选的，加不加都行，加上是为了帮助解释器识别变量边界

#### 只读变量

> readonly 将变量设置为只读，可不被修改。

#### 删除变量

> unset将变量删除

#### 变量类型

> 三种变量：
>
> 局部变量，在脚本或命令中定义，只在当前shell有效。
>
> 环境变量，所有程序都可以访问环境变量。
>
> shell变量，由shell 程序设置的特殊变量，其中一部分是环境变量，一部分是局部变量。

### Shell字符串

> 字符串是shell中最常用的数据类型，可以使用单引号，也可以使用双引号，也可以不用引号。
>
> 双引号里可以有变量
>
> 双引号里可以出现转义字符
>
> 单引号里不能出现单引号

#### 拼接字符串

> 直接将变量放到一起就可以
>
> 如：$var1$var2$var3

#### 获取字符串长度

> ```shell
> stinr=“123455”
> 
> echo ${#stinr}
> ```

#### 提取子字符串

> ```shell
> string="runoob is a great site"
> echo ${string:1:4} # 输出 unoo
> ```

#### 查找子字符串

> ``` shell
> string="runoob is a great site"
> echo `expr index "$string" io` 
> ```

### Shell数组

> shell只支持一维数组，没有限定数组的大小

#### 定义数组

> 用方括号表示数组，数组元素用**空格**分割。

#### 读取数组

> ${数组名[下标]}，下标从0开始。
>
> 使用@读取所有元素

#### 数组长度

> 取得数组元素的个数
>
> length=${#array_name[@]}
>
> 或者
>
> length=${#array_name[*]}
>
> 取得数组单个元素的长度
>
> lengthn=${#array_name[n]}

### Shell注释

> 以#开头的行，会被解释器忽略

### Shell参数

> 在执行脚本时，向脚本传递参数，脚本内获取参数的格式为：$n，n代表第几个参数。

#### 特殊参数

> $#，传递到脚本的参数个数
>
> $*，以单个字符显示所有传递到脚本的参数
>
> $$，脚本运行的当前进程ID
>
> $!，后台运行的最后一个进程ID
>
> $@，与$*相同，使用是加引号，在引号中返回每个参数
>
> $-，显示shell使用的当前选项，与set命令相同。
>
> $?，显示命令最后的退出状态，0表示没有错误，其他值都表示有错。

